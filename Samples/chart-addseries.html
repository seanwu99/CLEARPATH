<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv='Content-Type' content='text/html;charset=UTF-8' />

<script src="https://sapui5.netweaver.ondemand.com/resources/sap-ui-core.js" id="sap-ui-bootstrap"
	data-sap-ui-libs="sap.m" data-sap-ui-theme="sap_bluecrystal">
	
</script>
<!-- only load the mobile lib "sap.m" and the "sap_bluecrystal" theme -->

<script>
	$(function() {

		chart1 = new Highcharts.stockChart('container', {
			chart : {
				type : 'spline',
			// 				animation : Highcharts.svg, // don't animate in old IE
			// 				marginRight : 10,
			// 				events : {
			// 					load : function() {

			// 						// set up the updating of the chart each second
			// 						var series = this.series[0];
			// 						setInterval(function() {
			// 							var x = (new Date()).getTime(), // current time
			// 							y = Math.random();
			// 							series.addPoint([ x, y ], true, true);
			// 						}, 1000);
			// 					}
			// 				}
			},
			rangeSelector : {
				buttons : [ {
					type : 'minute',
					count : 1,
					text : 'min.'
				}, {
					type : 'hour',
					count : 1,
					text : 'hour'
				}, {
					type : 'hour',
					count : 8,
					text : 'shift'
				}, {
					type : 'day',
					count : 1,
					text : 'day'
				}, {
					type : 'week',
					count : 1,
					text : 'week'
				}, {
					type : 'month',
					count : 1,
					text : 'mon.'
				}, {
					type : 'month',
					count : 12,
					text : 'year'
				}, {
					type : 'all',
					text : 'All'
				} ],
				selected : 7
			},
			// 			title : {
			// 				align : "center",
			// 				floating : false,
			// 				margin : 15,
			// 				style : {
			// 					"color" : "#333333",
			// 					"fontSize" : "16px"
			// 				},
			// 				text : "title title",
			// 				// 				useHTML: false,
			// 				// 				//verticalAlign: undefined
			// 				// 				widthAdjust: -44,
			// 				x : 0,
			// 				y : 10,
			// 			},
			legend : {
				enabled : true,
				align : "center",
				verticalAlign : "top",
				shadow : false,
				x : 0,
				y : 20,
			},
			yAxis : {
				labels : {
					formatter : function() {
						return (this.value > 0 ? ' + ' : '') + this.value + '%';
					}
				},
				plotLines : [ {
					value : 0,
					width : 2,
					color : 'silver'
				} ]
			},
			navigator : {
				enabled : true
			},
			// 			tooltip : {
			// 				pointFormat : '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> (%)<br/>',
			// 				valueDecimals : 2,
			// 				split : true
			// 			},
			// 			rangeSelector : {
			// 				selected : 0
			// 			},
			colors : [ '#90ed7d', '#7cb5ec', '#f7a35c', '#888888' ],

			series : mockData(10000),
		});

		$('#button1').click(function() {
			// 			var chart = $('#container').highcharts();
			chart1.series[0].remove();
			chart1.series[0].remove();
			chart1.series[0].remove();
			chart1.series[0].remove();
			var _series = mockData(60);
			chart1.addSeries(_series[0]);
			chart1.addSeries(_series[1]);
			chart1.addSeries(_series[2]);
			chart1.addSeries(_series[3]);
			// 			$(this).attr('disabled', true);
		});

		$('#button2').click(function() {
			var x = new Date().getTime(); // current time
			x = Math.round(x / 1000) * 1000;
			var a = (45 + 55 * Math.random()) | 0;
			var p = (45 + 55 * Math.random()) | 0;
			var q = (45 + 55 * Math.random()) | 0;
			var e = Math.round(a * p * q / 10000);

			chart1.series[0]['name'] = "OEE " + e + " %";
			chart1.series[1]['name'] = "Availability " + a + " %";
			chart1.series[2]['name'] = "Performance " + p + " %";
			chart1.series[3]['name'] = "Quality " + q + " %";
			// 			chart1.series[0].update({
			// 				name : "OEE " + e + "%",
			// 			});
			// 			chart1.series[1].update({
			// 				name : "Availability " + a + "%",
			// 			});
			// 			chart1.series[2].update({
			// 				name : "Performance " + p + "%",
			// 			});
			chart1.series[3].update({
				name : "Quality " + q + "%",
			});
			chart1.series[1].addPoint([ x, a ], true, false);
			chart1.series[2].addPoint([ x, p ], true, false);
			chart1.series[3].addPoint([ x, q ], true, false);
			chart1.series[0].addPoint([ x, e ], true, false);
		});

		function mockData(n) {
			_series = [];
			dOEE = [];
			dAvailability = _random(n);
			dPerformance = _random(n);
			dQuality = _random(n);

			for (i = 0; i < dAvailability.length; i++) {
				dOEE.push([ dAvailability[i][0], (dAvailability[i][1] * dPerformance[i][1] * dQuality[i][1] / 10000) | 0 ]);
			}

			_series.push({
				name : 'OEE',
				data : dOEE
			});
			_series.push({
				name : 'Availability',
				data : dAvailability
			});
			_series.push({
				name : 'Performance',
				data : dPerformance
			});

			_series.push({
				name : 'Quality',
				data : dQuality
			});
			return _series;
		}

		function _random(n) {
			_data = [];
			time = Math.round((new Date().getTime() - n * 1000) / 1000) * 1000;
			for (i = 0; i < n; i++) {
				_data.push([ time + i * 1000, 42 + Math.round((Math.random() * 55)) ]);
			}
			return _data;
		}
	});
</script>

</head>
<body class="sapUiBody" role="application">
	<div id="container" style="height: 400px; min-width: 600px"></div>

	<button id="button1">Add series</button>
	<button id="button2">Add point</button>

	<!-- 	<button id="button6">Add point</button> -->
	<script src="highstock.js"></script>
	<script src="exporting.js"></script>

</body>
</html>