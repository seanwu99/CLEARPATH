<?xml version="1.0" encoding="UTF-8"?><SQLQuery AllowBuffering="false" AllowFuture="true" AutoTypeParameters="false" CacheDuration="0" CacheDurationUnits="" Columns="" Comment="" Connector="" DateColumn="" DateFormat="MM/dd/yyyy HH:mm:ss" Debug="false" Description="" DocType="SQLQuery" Duration="60" DurationUnits="M" EndDate="" FilterExpr="" FixedQuery="" Group="" GroupingExpr="" ID="13554" InlineTransform="" IntervalCount="1" IsCachable="false" JoinExpr="" Mask="" Method="" Mode="FixedQuery" NumberFormat="0.00" Param.1="ALL" Param.10="" Param.11="" Param.12="" Param.13="" Param.14="" Param.15="" Param.16="" Param.17="" Param.18="" Param.19="" Param.2="" Param.20="" Param.21="" Param.22="" Param.23="" Param.24="" Param.25="" Param.26="" Param.27="" Param.28="" Param.29="" Param.3="" Param.30="" Param.31="" Param.32="" Param.4="" Param.5="" Param.6="" Param.7="" Param.8="" Param.9="" ParamDescription.1="" ParamDescription.10="" ParamDescription.11="" ParamDescription.12="" ParamDescription.13="" ParamDescription.14="" ParamDescription.15="" ParamDescription.16="" ParamDescription.17="" ParamDescription.18="" ParamDescription.19="" ParamDescription.2="" ParamDescription.20="" ParamDescription.21="" ParamDescription.22="" ParamDescription.23="" ParamDescription.24="" ParamDescription.25="" ParamDescription.26="" ParamDescription.27="" ParamDescription.28="" ParamDescription.29="" ParamDescription.3="" ParamDescription.30="" ParamDescription.31="" ParamDescription.32="" ParamDescription.4="" ParamDescription.5="" ParamDescription.6="" ParamDescription.7="" ParamDescription.8="" ParamDescription.9="" ParamType.1="" ParamType.10="" ParamType.11="" ParamType.12="" ParamType.13="" ParamType.14="" ParamType.15="" ParamType.16="" ParamType.17="" ParamType.18="" ParamType.19="" ParamType.2="" ParamType.20="" ParamType.21="" ParamType.22="" ParamType.23="" ParamType.24="" ParamType.25="" ParamType.26="" ParamType.27="" ParamType.28="" ParamType.29="" ParamType.3="" ParamType.30="" ParamType.31="" ParamType.32="" ParamType.4="" ParamType.5="" ParamType.6="" ParamType.7="" ParamType.8="" ParamType.9="" Password="" PathID="2922" Query=";with CTE as (&#10;    SELECT&#10;        recordID, unitType, unitName, unitDescr, idUnitParent, CASE unitActive WHEN 1 THEN 'Common/img/check.png' ELSE 'Common/img/blank.png' END AS src,&#10;&#9;&#9;ModifiedBy, ModifiedOn, CreatedBy, CreatedOn,&#10;        cast(row_number() over(partition by idUnitParent order by unitName) as varchar(max)) as [Path],&#10;        0 as grpCount,&#10;        1 as Level,&#10;        row_number() over(partition by  idUnitParent order by unitName) / power(100.0,0) as SortOrder&#10;    FROM MESM_FloorMaps&#10;    WHERE idUnitParent = 0&#10;&#10; UNION ALL&#10;&#10;    SELECT&#10;        t.recordID, t.unitType, t.unitName, t.unitDescr, t.idUnitParent, CASE t.unitActive WHEN 1 THEN 'Common/img/check.png' ELSE 'Common/img/blank.png' END AS src,&#10;&#9;&#9;t.ModifiedBy, t.ModifiedOn, t.CreatedBy, t.CreatedOn,&#10;        [Path] +'-'+ cast(row_number() over(partition by t.idUnitParent order by t.unitName) as varchar(max)),&#10;        CAST(row_number() over(partition by t.idUnitParent order by t.unitName) as INT),&#10;        Level+1,&#10;        SortOrder + row_number() over(partition by t.idUnitParent order by t.unitName) / power(100.0,Level+1)&#10;    FROM CTE&#10;&#9;JOIN MESM_FloorMaps t ON CTE.recordID = t.idUnitParent&#10;)  &#10;&#10;SELECT 0 AS 'recordID', 0 AS 'unitType', 'Please Select...' AS 'unitName', '' AS 'unitDescr', NULL AS unitParent, NULL AS src, NULL AS ModifiedBy, NULL AS ModifiedOn, NULL AS CreatedBy, NULL AS CreatedOn, NULL AS Path, NULL AS grpCount, NULL AS Level, NULL AS SortOrder, NULL AS childID&#10;UNION ALL&#10;&#10;SELECT * &#10;,ROW_NUMBER() OVER (PARTITION BY idUnitParent ORDER BY unitName) - 1 AS 'childID'&#10;FROM CTE WHERE unitType = '[Param.1]' ORDER BY SortOrder&#10;" QueryParams="" ReaderRoles="SAP_XMII_User" RestrictedPropertyOverride="false" RowCount="10000" SaveDate="09/26/2016 15:59:41" Schedule="" SelectedColumns="" Server="OEEM" Service="" SortExpr="" StartDate="" Tables="" Time="" TimePeriod="" Trace="false" UseTypedParams="false" UserName="" Version="15.0.4.11" WriterRoles="SAP_XMII_Super_Administrator,SAP_XMII_Administrator,SAP_XMII_Developer" XParamName.1="" XParamName.10="" XParamName.11="" XParamName.12="" XParamName.13="" XParamName.14="" XParamName.15="" XParamName.16="" XParamName.2="" XParamName.3="" XParamName.4="" XParamName.5="" XParamName.6="" XParamName.7="" XParamName.8="" XParamName.9="" XParamValue.1="" XParamValue.10="" XParamValue.11="" XParamValue.12="" XParamValue.13="" XParamValue.14="" XParamValue.15="" XParamValue.16="" XParamValue.2="" XParamValue.3="" XParamValue.4="" XParamValue.5="" XParamValue.6="" XParamValue.7="" XParamValue.8="" XParamValue.9=""><Joins/><Tasks/></SQLQuery>